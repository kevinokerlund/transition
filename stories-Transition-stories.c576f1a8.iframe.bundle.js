/*! For license information please see stories-Transition-stories.c576f1a8.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunktransition=self.webpackChunktransition||[]).push([[27],{"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")},"./src/stories/Transition.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Transition_stories});var react=__webpack_require__("./node_modules/react/index.js");function isRenderProp(child){return!(0,react.isValidElement)(child)&&"function"==typeof child}let queue=[],isRunning=!1;function loop(timestamp){queue=queue.filter((easing=>easing.run(timestamp))),queue.length?window.requestAnimationFrame(loop):isRunning=!1}class Ease{constructor(time,onStart,during,onEnd){this.time=time,this.onStart=onStart,this.during=during,this.onEnd=onEnd,this.hasStarted=!1,this.stopped=!1,this.firstTimestamp=0}run(timestamp){if(this.stopped)return!1;this.hasStarted||(this.firstTimestamp=timestamp,this.hasStarted=!0,this.onStart());const progress=timestamp-this.firstTimestamp,delta=(x=progress/this.time,Math.sin(x*Math.PI/2));var x;return progress<this.time?(this.during(delta),!0):(this.during(1),this.onEnd(),!1)}stop(){this.stopped=!0}}function createEasing(time,onStart,during,onEnd){const easing=new Ease(time,onStart,during,onEnd);return queue.push(easing),{start(){!function run(){isRunning||(window.requestAnimationFrame(loop),isRunning=!0)}()},stop(){easing.stop()}}}function getPositionRelativeToParent(element){const parent=document.body,{top:parentTop,left:parentLeft}=parent.getBoundingClientRect(),elementBox=element.getBoundingClientRect(),{width,height,top,left}=elementBox;return{width,height,top:top-parentTop,left:left-parentLeft}}function getPositionChanges(previousPosition,nextPosition){const width=previousPosition.width!==nextPosition.width,height=previousPosition.height!==nextPosition.height,top=previousPosition.top!==nextPosition.top,left=previousPosition.left!==nextPosition.left;return{some:width||height||top||left,width,height,top,left}}function convertCssObjectToCssText(styleObject){return Object.entries(styleObject).map((([key,value])=>{return[(camelCaseString=key,camelCaseString.replace(/([A-Z])/g,((m,c)=>`-${c.toLowerCase()}`))),value].join(":");var camelCaseString})).join(";")}class Transform{constructor(origin=""){this.transformOrigin=origin,this.transform={}}origin(origin){return this.transformOrigin=origin,this}scaleX(x){return this.transform.scaleX=x,this}scaleY(y){return this.transform.scaleY=y,this}scale(x,y){return this.scaleX(x),this.scaleY(y),this}translateX(x){return this.transform.translateX=x,this}translateY(y){return this.transform.translateY=y,this}translate(x,y){return this.translateX(x),this.translateY(y),this}toObject(){return{transform:Object.entries(this.transform).reduce(((acc,[key,value])=>(value&&acc.push(`${key}(${value})`),acc)),[]).join(""),...this.transformOrigin?{"transform-origin":this.transformOrigin}:{}}}}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");class Transition extends react.Component{constructor(props){super(props),this._containerRef=(0,react.createRef)(),this._isTransitioning=!1}state={isTransitioning:!1};_resetElements(){const{style={}}=this.props;this._containerRef.current&&(this._containerRef.current.style.cssText=convertCssObjectToCssText(style)),[[".js-transition-reverse-scale"],[".js-transition-preserve-aspect-ratio"]].forEach((([selector])=>{this._containerRef.current?.querySelectorAll(selector).forEach((element=>{const userStyle=JSON.parse(element.getAttribute("data-style")||"");element.style.cssText=convertCssObjectToCssText(userStyle)}))}))}componentDidMount(){}getSnapshotBeforeUpdate(prevProps,prevState){const isStateUpdateAfterStartingTransition=prevState.isTransitioning!==this.state.isTransitioning;return!this._containerRef.current||isStateUpdateAfterStartingTransition?null:getPositionRelativeToParent(this._containerRef.current)}componentDidUpdate(prevProps,prevState,snapshot){if(!this._containerRef.current||!snapshot)return;this._isTransitioning&&this._resetElements();const{style={},duration=200}=this.props,trueOuterPosition=getPositionRelativeToParent(this._containerRef.current),trueAspectRatio=trueOuterPosition.width/trueOuterPosition.height,positionChanges=getPositionChanges(snapshot,trueOuterPosition),noChangesAfterInteruption=!!this._lastTrueOuterPosition&&!getPositionChanges(this._lastTrueOuterPosition,trueOuterPosition).some;if(this._lastTrueOuterPosition=trueOuterPosition,this._isTransitioning&&!noChangesAfterInteruption&&this._easing?.stop(),!positionChanges.some||noChangesAfterInteruption)return;const childIsRenderProp=isRenderProp(this.props.children);this._easing=createEasing(duration,(()=>{this._isTransitioning=!0,childIsRenderProp&&this.setState({isTransitioning:!0})}),(delta=>{const outerTransform=new Transform("top left");if(positionChanges.top||positionChanges.left){const x=(snapshot.left-trueOuterPosition.left)*(1-delta),y=(snapshot.top-trueOuterPosition.top)*(1-delta);positionChanges.top&&positionChanges.left?outerTransform.translate(`${x}px`,`${y}px`):positionChanges.top?outerTransform.translateY(`${y}px`):positionChanges.left&&outerTransform.translateX(`${x}px`)}if(positionChanges.width||positionChanges.height){const reverseScaleTransform=new Transform("center center"),preserveAspectTransform=new Transform("center center"),xScale=((trueOuterPosition.width-snapshot.width)*delta+snapshot.width)/trueOuterPosition.width,yScale=((trueOuterPosition.height-snapshot.height)*delta+snapshot.height)/trueOuterPosition.height,currentWidth=trueOuterPosition.width*xScale,currentHeight=trueOuterPosition.height*yScale,toMeetScaleWidthCouldbeSetTo=currentHeight*trueAspectRatio,toMeetScaleHeightCouldbeSetTo=currentWidth/trueAspectRatio;if(positionChanges.width&&(outerTransform.scaleX(`${xScale}`),reverseScaleTransform.scaleX(""+1/xScale)),positionChanges.height&&(outerTransform.scaleY(`${yScale}`),reverseScaleTransform.scaleY(""+1/yScale)),toMeetScaleWidthCouldbeSetTo<=currentWidth){const calc=toMeetScaleWidthCouldbeSetTo/currentWidth;preserveAspectTransform.scaleX(`${calc}`)}if(toMeetScaleHeightCouldbeSetTo<=currentHeight){const calc=toMeetScaleHeightCouldbeSetTo/currentHeight;preserveAspectTransform.scaleY(`${calc}`)}Object.entries({".js-transition-reverse-scale":reverseScaleTransform,".js-transition-preserve-aspect-ratio":preserveAspectTransform}).forEach((([selector,transform])=>{this._containerRef.current?.querySelectorAll(selector).forEach((element=>{const userStyle=JSON.parse(element.getAttribute("data-style")||"");element.style.cssText=convertCssObjectToCssText({...userStyle,...transform.toObject()})}))}))}this._containerRef.current&&(this._containerRef.current.style.cssText=convertCssObjectToCssText({...style,...outerTransform.toObject()}))}),(()=>{this._resetElements(),this._isTransitioning=!1,childIsRenderProp&&this.setState({isTransitioning:!1})})),this._easing.start()}componentWillUnmount(){}render(){const{children,className,style}=this.props,{isTransitioning}=this.state;return(0,jsx_runtime.jsx)("div",{style:{...style},className,"data-transition-element":"container",ref:this._containerRef,children:(child=children,propsToApply={isTransitioning},isRenderProp(child)?child({...propsToApply}):child)});var child,propsToApply}}Transition.displayName="Transition",Transition.ReverseScale=function ReverseScale({children,style={}}){const stringifiedStyle=JSON.stringify(style);return(0,jsx_runtime.jsx)("div",{className:"js-transition-reverse-scale","data-style":stringifiedStyle,style,children})},Transition.PreserveAspectRatio=function PreserveAspectRatio({children,style={}}){const stringifiedStyle=JSON.stringify(style);return(0,jsx_runtime.jsx)("div",{className:"js-transition-preserve-aspect-ratio","data-style":stringifiedStyle,style,children})};try{Transition.displayName="Transition",Transition.__docgenInfo={description:"",displayName:"Transition",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},duration:{defaultValue:null,description:"",name:"duration",required:!1,type:{name:"number"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/transition/transition.tsx#Transition"]={docgenInfo:Transition.__docgenInfo,name:"Transition",path:"src/transition/transition.tsx#Transition"})}catch(__react_docgen_typescript_loader_error){}const TransitionStory=()=>(0,jsx_runtime.jsx)(Transition,{children:"Story Skeleton"});TransitionStory.displayName="TransitionStory";const Transition_stories={title:"Transition",component:TransitionStory,parameters:{layout:"fullscreen"}},Primary={args:{}},__namedExportsOrder=["Primary"];Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"{\n  args: {}\n}",...Primary.parameters?.docs?.source}}}}}]);